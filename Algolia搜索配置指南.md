## æ¦‚è¿°

Algolia æä¾›å¼ºå¤§çš„æœç´¢åŠŸèƒ½ï¼Œç›¸æ¯” VuePress å†…ç½®æœç´¢å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
- âš¡ **æ›´å¿«çš„æœç´¢é€Ÿåº¦** - æ¯«ç§’çº§å“åº”
- ğŸ¯ **æ›´ç²¾å‡†çš„æœç´¢ç»“æœ** - æ™ºèƒ½åŒ¹é…å’Œæ’åº
- âœ¨ **æœç´¢é«˜äº®** - å…³é”®è¯é«˜äº®æ˜¾ç¤º
- ğŸ“ **æœç´¢å»ºè®®** - è‡ªåŠ¨è¡¥å…¨å’Œæœç´¢å†å²
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ** - æ›´å¥½çš„ä¸­æ–‡æœç´¢ä½“éªŒ



## ç”³è¯·å…è´¹çš„ DocSearchï¼ˆæ¨èï¼‰

**DocSearch** æ˜¯ Algolia ä¸ºå¼€æºé¡¹ç›®å’ŒæŠ€æœ¯æ–‡æ¡£ç½‘ç«™æä¾›çš„å®Œå…¨å…è´¹æœåŠ¡ã€‚

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œ

åœ¨ç”³è¯·ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š
1. âœ… ç½‘ç«™å·²éƒ¨ç½²å¹¶å¯ä»¥å…¬å¼€è®¿é—®ï¼ˆå¦‚ Vercelã€GitHub Pagesï¼‰
2. âœ… ç½‘ç«™åŸŸåç¨³å®šï¼ˆå»ºè®®ä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼‰
3. âœ… ç½‘ç«™å†…å®¹è´¨é‡è‰¯å¥½ï¼ˆæŠ€æœ¯æ–‡æ¡£æˆ–åšå®¢ï¼‰

### ç¬¬äºŒæ­¥ï¼šæäº¤ç”³è¯·

1. **è®¿é—®ç”³è¯·é¡µé¢**
   - æ‰“å¼€ï¼šhttps://docsearch.algolia.com/apply/
   - é¡µé¢ä¼šæ˜¾ç¤ºç”³è¯·è¡¨å•ï¼Œ**Nameä¸­è¾“å…¥ä½ çš„åº”ç”¨å**ï¼š
   - <img src="attachments/image-20260107094506476.png" alt="image-20260107094506476" style="zoom:33%;" />
   - <img src="attachments/image-20260107094605373.png" alt="image-20260107094605373" style="zoom:33%;" />
   
2. **å¡«å†™ç”³è¯·ä¿¡æ¯**
   
   **å¿…å¡«é¡¹ï¼š**
   - **ç½‘ç«™ URL**ï¼šå¡«å†™ä½ çš„ç½‘ç«™å®Œæ•´åœ°å€ï¼ˆä¾‹å¦‚ï¼š`https://yixuan.cyou`ï¼‰
     
     - âš ï¸ å¿…é¡»æ˜¯ HTTPS
     - âš ï¸ å¿…é¡»æ˜¯å…¬å¼€å¯è®¿é—®çš„
     - <img src="attachments/image-20260107094818699.png" alt="image-20260107094818699" style="zoom:33%;" />
     - åŸŸåæ£€æµ‹æˆåŠŸä¸‹ç‚¹å‡»Next Crawl Websiteï¼š
     - <img src="attachments/image-20260107094844299.png" alt="image-20260107094844299" style="zoom:33%;" />
     - <img src="attachments/image-20260107101238128.png" alt="image-20260107101238128" style="zoom:33%;" />
     - > ä¸Šè¿°å¦‚æœå‡ºç°
       >
       > No content found at your start URL (https://yixuan.cyou)
       >
       > We couldn't create any records because no content was detected at your start URL. Please double-check that the URL is correct and update it if needed. If you believe this is an error, contact our DocSearch team on Discord. 
     - <img src="attachments/image-20260107103137570.png" alt="image-20260107103137570" style="zoom:50%;" />
     - ç­‰å¾…çˆ¬å–
     - <img src="attachments/image-20260107103007425.png" alt="image-20260107103007425" style="zoom:33%;" />
     - <img src="attachments/image-20260107103427446.png" alt="image-20260107103427446" style="zoom:33%;" />
     - <img src="attachments/image-20260107104045477.png" alt="image-20260107104045477" style="zoom:33%;" />
     - <img src="attachments/image-20260107104451518.png" alt="image-20260107104451518" style="zoom:50%;" />
     - <img src="attachments/image-20260107104536595.png" alt="image-20260107104536595" style="zoom: 33%;" />
   
3. **æäº¤ç”³è¯·**
   
   - <img src="attachments/image-20260107105711560.png" alt="image-20260107105711560" style="zoom: 33%;" />
   - å°†ä»£ç ä¸­è¯·æ±‚å¤´äºä¸Šè¿°ä»£ç é…ç½®ä¿æŒä¸€è‡´ï¼Œä¿å­˜æˆåŠŸåé‡æ–°ä¸Šä¼ ä»£ç åˆ°GitHubï¼Œç­‰å¾…Vercelæ­£ç¡®éƒ¨ç½²ï¼š
   - <img src="attachments/image-20260107110923359.png" alt="image-20260107110923359" style="zoom: 33%;" />
   - ç‚¹å‡»Verify Now
   - <img src="attachments/image-20260107105926495.png" alt="image-20260107105926495" style="zoom: 50%;" />
   - æ˜¾ç¤ºä¸‹è¿°å³é…ç½®æˆåŠŸ
   - <img src="attachments/image-20260107111517135.png" alt="image-20260107111517135" style="zoom:50%;" />
   
   

### ç¬¬ä¸‰æ­¥ï¼š

#### æ­¥éª¤ 1ï¼šç¼–è¾‘ Crawler é…ç½®

1. åœ¨ Algolia Dashboardï¼Œå·¦ä¾§èœå•ç‚¹å‡» **"Crawler"**

2. ```
   https://dashboard.algolia.com/apps/...ä½ çš„ID/crawler
   ```

3. æ‰¾åˆ° **"YiXuan Blog Crawler"**

4. ç‚¹å‡»è¿›å…¥é…ç½®é¡µé¢

<img src="attachments/image-20260107115448724.png" alt="image-20260107115448724" style="zoom: 33%;" />



#### æ­¥éª¤ 2ï¼šé…ç½®å†…å®¹é€‰æ‹©å™¨

æ‰¾åˆ° **"Editor"** 

<img src="attachments/image-20260107120832429.png" alt="image-20260107120832429" style="zoom: 33%;" />

ç”±äºä½ çš„ç½‘ç«™æ˜¯ VuePressï¼Œéœ€è¦é…ç½®åˆé€‚çš„é€‰æ‹©å™¨æ¥æå–å†…å®¹ã€‚å»ºè®®æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

**éœ€è¦æ›¿æ¢çš„æ•æ„Ÿä¿¡æ¯**

| é…ç½®é¡¹                  | è¯´æ˜                                     | è·å–ä½ç½®                             |
| :---------------------- | :--------------------------------------- | :----------------------------------- |
| YOUR_APP_ID             | Algolia Application ID                   | Dashboard â†’ Application â†’ API Keys   |
| YOUR_ADMIN_API_KEY      | Admin API Keyï¼ˆä»…åœ¨ Crawler é…ç½®ä¸­ä½¿ç”¨ï¼‰ | Dashboard â†’ API Keys â†’ Admin API Key |
| YOUR_INDEX_NAME         | ç´¢å¼•åç§°                                 | Dashboard â†’ Indices â†’ ä½ çš„ç´¢å¼•åç§°   |
| https://your-domain.com | ä½ çš„ç½‘ç«™åŸŸå                             | æ›¿æ¢ä¸ºå®é™…åŸŸå                       |

```json
new Crawler({
  // ========================================
  // åŸºç¡€é…ç½®
  // ========================================
  appId: "YOUR_APP_ID",              // Algolia Application ID
  apiKey: "YOUR_ADMIN_API_KEY",      // Admin API Keyï¼ˆä»…åœ¨ Crawler é…ç½®ä¸­ä½¿ç”¨ï¼Œä¸è¦æš´éœ²åœ¨å‰ç«¯ï¼‰
  indexPrefix: "",                    // ç´¢å¼•åç§°å‰ç¼€ï¼ˆå¯é€‰ï¼Œé€šå¸¸ç•™ç©ºï¼‰
  
  // ========================================
  // çˆ¬å–é…ç½®
  // ========================================
  startUrls: ["https://your-domain.com"],  // èµ·å§‹ URLï¼Œä»è¿™äº›é¡µé¢å¼€å§‹çˆ¬å–
  discoveryPatterns: ["https://your-domain.com/**"],  // URL å‘ç°æ¨¡å¼ï¼Œ** è¡¨ç¤ºåŒ¹é…æ‰€æœ‰è·¯å¾„
  renderJavaScript: true,             // âš ï¸ é‡è¦ï¼šå¯ç”¨ JavaScript æ¸²æŸ“ï¼ˆSPA ç½‘ç«™å¿…é¡»ä¸º trueï¼‰
  maxDepth: 10,                       // æœ€å¤§çˆ¬å–æ·±åº¦
  maxUrls: null,                      // æœ€å¤§ URL æ•°é‡é™åˆ¶ï¼ˆnull è¡¨ç¤ºæ— é™åˆ¶ï¼‰
  rateLimit: 8,                       // çˆ¬å–é€Ÿç‡é™åˆ¶ï¼ˆæ¯ç§’è¯·æ±‚æ•°ï¼‰
  
  // ========================================
  // çˆ¬å–è®¡åˆ’
  // ========================================
  schedule: "on the 9 day of the month",  // å®šæœŸçˆ¬å–è®¡åˆ’ï¼ˆCron æ ¼å¼ï¼‰
  
  // ========================================
  // Sitemap é…ç½®
  // ========================================
  sitemaps: [],                       // Sitemap URL åˆ—è¡¨ï¼ˆå¯é€‰ï¼Œå¦‚ ["https://your-domain.com/sitemap.xml"]ï¼‰
  ignoreCanonicalTo: false,           // æ˜¯å¦å¿½ç•¥ canonical æ ‡ç­¾
  
  // ========================================
  // å†…å®¹æå–é…ç½®
  // ========================================
  actions: [
    {
      indexName: "YOUR_INDEX_NAME",   // ç›®æ ‡ç´¢å¼•åç§°
      pathsToMatch: ["https://your-domain.com/**"],  // åŒ¹é…è¿™äº›è·¯å¾„çš„é¡µé¢
      recordExtractor: ({ helpers }) => {
        return helpers.docsearch({
          recordProps: {
            // æ ‡é¢˜å±‚çº§é€‰æ‹©å™¨ï¼ˆh1-h6ï¼‰
            lvl0: {
              selectors: "",           // é€šå¸¸ä¸ºç©º
              defaultValue: "Documentation",  // é»˜è®¤å€¼
            },
            lvl1: [
              ".content h1",          // VuePress å†…å®¹å®¹å™¨
              ".page-content h1",
              ".theme-default-content h1",
              "article h1",
              "main h1",
              "header h1",
              "h1",
              "head > title"
            ],
            lvl2: [
              ".content h2",
              ".page-content h2",
              ".theme-default-content h2",
              "article h2",
              "main h2",
              "h2"
            ],
            lvl3: [
              ".content h3",
              ".page-content h3",
              ".theme-default-content h3",
              "article h3",
              "main h3",
              "h3"
            ],
            lvl4: [
              ".content h4",
              ".page-content h4",
              ".theme-default-content h4",
              "article h4",
              "main h4",
              "h4"
            ],
            lvl5: [
              ".content h5",
              ".page-content h5",
              ".theme-default-content h5",
              "article h5",
              "main h5",
              "h5"
            ],
            lvl6: [
              ".content h6",
              ".page-content h6",
              ".theme-default-content h6",
              "article h6",
              "main h6",
              "h6"
            ],
            // å†…å®¹æ–‡æœ¬é€‰æ‹©å™¨ï¼ˆæ®µè½å’Œåˆ—è¡¨ï¼‰
            content: [
              ".content p, .content li",
              ".page-content p, .page-content li",
              ".theme-default-content p, .theme-default-content li",
              "article p, article li",
              "main p, main li",
              ".main-content p, .main-content li",
              "p, li"
            ],
          },
          aggregateContent: true,      // èšåˆå†…å®¹
          recordVersion: "v3",         // è®°å½•ç‰ˆæœ¬
        });
      },
    },
  ],
  
  // ========================================
  // å®‰å…¨è®¾ç½®
  // ========================================
  safetyChecks: {
    beforeIndexPublishing: {
      maxLostRecordsPercentage: 30  // å‘å¸ƒå‰æ£€æŸ¥ï¼šä¸¢å¤±è®°å½•ç™¾åˆ†æ¯”é˜ˆå€¼
    }
  },
  
  // ========================================
  // ç´¢å¼•åˆå§‹è®¾ç½®
  // ========================================
  initialIndexSettings: {
    "YOUR_INDEX_NAME": {
      // ç”¨äºè¿‡æ»¤çš„å±æ€§
      attributesForFaceting: ["type", "lang"],
      
      // è¿”å›çš„å±æ€§
      attributesToRetrieve: [
        "hierarchy",
        "content",
        "anchor",
        "url",
        "url_without_anchor",
        "type",
      ],
      
      // é«˜äº®å±æ€§
      attributesToHighlight: ["hierarchy", "content"],
      
      // ç‰‡æ®µå±æ€§
      attributesToSnippet: ["content:10"],
      
      // é©¼å³°å‘½åçš„å±æ€§
      camelCaseAttributes: ["hierarchy", "content"],
      
      // å¯æœç´¢å±æ€§ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
      searchableAttributes: [
        "unordered(hierarchy.lvl0)",
        "unordered(hierarchy.lvl1)",
        "unordered(hierarchy.lvl2)",
        "unordered(hierarchy.lvl3)",
        "unordered(hierarchy.lvl4)",
        "unordered(hierarchy.lvl5)",
        "unordered(hierarchy.lvl6)",
        "content",
      ],
      
      // å»é‡è®¾ç½®
      distinct: true,
      attributeForDistinct: "url",
      
      // è‡ªå®šä¹‰æ’åº
      customRanking: [
        "desc(weight.pageRank)",    // æŒ‰é¡µé¢æ’åé™åº
        "desc(weight.level)",        // æŒ‰å±‚çº§é™åº
        "asc(weight.position)",      // æŒ‰ä½ç½®å‡åº
      ],
      
      // æ’åºè§„åˆ™
      ranking: [
        "words",
        "filters",
        "typo",
        "attribute",
        "proximity",
        "exact",
        "custom",
      ],
      
      // é«˜äº®æ ‡ç­¾
      highlightPreTag: '<span class="algolia-docsearch-suggestion--highlight">',
      highlightPostTag: "</span>",
      
      // æ‹¼å†™å®¹é”™è®¾ç½®
      minWordSizefor1Typo: 3,        // æœ€å°å•è¯é•¿åº¦ï¼ˆ1 ä¸ªæ‹¼å†™é”™è¯¯ï¼‰
      minWordSizefor2Typos: 7,       // æœ€å°å•è¯é•¿åº¦ï¼ˆ2 ä¸ªæ‹¼å†™é”™è¯¯ï¼‰
      allowTyposOnNumericTokens: false,  // æ•°å­—ä»¤ç‰Œæ˜¯å¦å…è®¸æ‹¼å†™é”™è¯¯
      
      // å…¶ä»–è®¾ç½®
      minProximity: 1,               // æœ€å°é‚»è¿‘åº¦
      ignorePlurals: true,           // å¿½ç•¥å¤æ•°å½¢å¼
      advancedSyntax: true,          // å¯ç”¨é«˜çº§è¯­æ³•
      attributeCriteriaComputedByMinProximity: true,
      removeWordsIfNoResults: "allOptional",  // æ— ç»“æœæ—¶ç§»é™¤å•è¯çš„ç­–ç•¥
    },
  },
});
```

å¼€å§‹çˆ¬å–ï¼š

![image-20260107145252533](attachments/image-20260107145252533.png)

å¦‚å›¾æ‰€ç¤ºå°±çˆ¬å–æˆåŠŸï¼š

![image-20260107171447815](attachments/image-20260107171447815.png)

### ç¬¬å››æ­¥ï¼šé…ç½®åˆ°é¡¹ç›®

æ”¶åˆ°é…ç½®é‚®ä»¶åï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š

1. **æ‰“å¼€é…ç½®æ–‡ä»¶**
   - ç¼–è¾‘ `docs/.vuepress/config.ts`

2. **æ‰¾åˆ° Algolia é…ç½®ä½ç½®**
   - åœ¨ `theme: recoTheme({...})` é…ç½®å—ä¸­
   - å½“å‰é…ç½®åœ¨ç¬¬ 164-174 è¡Œï¼ˆå·²è¢«æ³¨é‡Šï¼‰

3. **å–æ¶ˆæ³¨é‡Šå¹¶å¡«å†™é…ç½®**
   
   æ‰¾åˆ°è¿™æ®µä»£ç ï¼š
   ```typescript:164:174:docs/.vuepress/config.ts
   // Algolia æœç´¢é…ç½®ï¼ˆå·²ç¦ç”¨ï¼Œä½¿ç”¨ä¸»é¢˜å†…ç½®æœç´¢ï¼‰
   // algolia: {
   //     appId: 'MLKOH1MKDT',
   //     apiKey: '5af2979d2d290ce4e9247d7f89549455',
   //     indexName: 'æ‡¿è½©çš„åšå®¢_pages',
   //     // å¯é€‰ï¼šé«˜çº§é…ç½®
   //     algoliaOptions: { 
   //         'facetFilters': ["lang:zh-CN"] 
   //     },
   //     debug: false // è°ƒè¯•æ—¶å¯è®¾ç½®ä¸º true
   // },
   ```
   
   ä¿®æ”¹ä¸ºï¼ˆå°†é‚®ä»¶ä¸­çš„å€¼æ›¿æ¢è¿›å»ï¼‰ï¼š
   ```typescript
   // Algolia æœç´¢é…ç½®
   algolia: {
       appId: 'YOUR_APP_ID',        // æ›¿æ¢ä¸ºé‚®ä»¶ä¸­çš„ appId
       apiKey: 'YOUR_API_KEY',      // æ›¿æ¢ä¸ºé‚®ä»¶ä¸­çš„ apiKeyï¼ˆSearch-Only API Keyï¼‰
       indexName: 'YOUR_INDEX_NAME', // æ›¿æ¢ä¸ºé‚®ä»¶ä¸­çš„ indexName
       // å¯é€‰ï¼šé«˜çº§é…ç½®
       algoliaOptions: { 
           'facetFilters': ["lang:zh-CN"] // ä¸­æ–‡ç½‘ç«™ä½¿ç”¨æ­¤é…ç½®
       },
       debug: false // è°ƒè¯•æ—¶å¯è®¾ç½®ä¸º trueï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®® false
   },
   ```

4. **ä¿å­˜æ–‡ä»¶**

### ç¬¬äº”æ­¥ï¼šç­‰å¾…ç´¢å¼•å»ºç«‹

- â±ï¸ **ç´¢å¼•æ—¶é—´**ï¼šDocSearch ä¼šåœ¨å®¡æ ¸é€šè¿‡åçš„ 1-3 å¤©å†…é¦–æ¬¡çˆ¬å–ç½‘ç«™
- ğŸ”„ **æ›´æ–°é¢‘ç‡**ï¼šä¹‹åæ¯å‘¨è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡
- ğŸ“Š **æŸ¥çœ‹çŠ¶æ€**ï¼šå¯ä»¥åœ¨ Algolia Dashboard æŸ¥çœ‹ç´¢å¼•çŠ¶æ€

---

